---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { slug: post.id },
		props: { post },
	}));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout title={`${post.data.title} | Bucks County Fence Blog`} description={post.data.description}>
	<article class="container mx-auto px-4 py-12 max-w-4xl">
		{post.data.image && (
			<img 
				src={post.data.image} 
				alt={post.data.title}
				class="w-full h-64 md:h-96 object-cover rounded-lg mb-8"
			/>
		)}
		
		<div class="mb-6">
			<div class="text-sm text-gray-500 mb-2">
				{post.data.pubDate.toLocaleDateString('en-US', {
					year: 'numeric',
					month: 'long',
					day: 'numeric'
				})}
				{post.data.author && ` â€¢ ${post.data.author}`}
			</div>
			<h1 class="text-4xl font-bold">{post.data.title}</h1>
		</div>
		
		<div class="prose prose-lg max-w-none">
			<Content />
		</div>
		
		{post.data.tags && post.data.tags.length > 0 && (
			<div class="mt-8 pt-8 border-t">
				<div class="flex flex-wrap gap-2">
					{post.data.tags.map((tag: string) => (
						<span class="badge badge-outline">{tag}</span>
					))}
				</div>
			</div>
		)}
	</article>
</Layout>
